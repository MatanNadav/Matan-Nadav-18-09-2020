(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{36:function(e,t,a){e.exports=a(75)},41:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){e.exports=a.p+"static/media/day.7f93fbdb.svg"},68:function(e,t,a){e.exports=a.p+"static/media/cloudy.ad789581.svg"},69:function(e,t,a){e.exports=a.p+"static/media/rainy-5.2bd23641.svg"},70:function(e,t,a){e.exports=a.p+"static/media/weather.56c46d80.svg"},71:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),i=a.n(c),o=(a(41),a(12)),u=a(3),l=a(2),s=a(10),m=a.n(s),f=a(14),d=a(33),v=a.n(d).a.create({withCredentials:!0}),h={getWeather:function(e,t){return p.apply(this,arguments)},updateWeatherPreferences:function(){var e=w("weather");return e.weather.isFavorite=!e.weather.isFavorite,O("weather",e),e.weather},storageFavorites:b,loadFromStorage:w,getAutocomplete:function(e){return E.apply(this,arguments)}};function p(){return(p=Object(f.a)(m.a.mark((function e(t,a){var n,r,c,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===t||void 0===t?void 0:t.name)||!a||t.name.toLowerCase()!==a.toLowerCase()){e.next=6;break}if(!(n=w("weather"))){e.next=4;break}return e.abrupt("return",n);case 4:e.next=24;break;case 6:return e.prev=6,r=(null===t||void 0===t?void 0:t.key)?"?q=".concat(t.key,"&name=").concat(t.name):"?q=215854&name=Tel Aviv",e.next=10,v.get("".concat("/api/","weather")+r);case 10:if((c=e.sent).data.weather){e.next=14;break}return i=w("weather"),e.abrupt("return",i);case 14:return(o=b(null,"load"))[0]&&o.findIndex((function(e){return e.key===c.data.weather.key}))>=0&&(c.data.weather.isFavorite=!0),O("weather",c.data),O("impor",c.data),e.abrupt("return",c.data);case 21:throw e.prev=21,e.t0=e.catch(6),e.t0;case 24:case"end":return e.stop()}}),e,null,[[6,21]])})))).apply(this,arguments)}function E(){return(E=Object(f.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="?q=".concat(t),e.prev=1,e.next=4,v.get("".concat("/api/","weather/suggest")+a);case 4:if((n=e.sent).data[0]){e.next=7;break}return e.abrupt("return",null);case 7:return(r=n.data.map((function(e){return{key:e.Key,name:e.LocalizedName}}))).length>5&&(r=r.slice(0,5)),e.abrupt("return",r);case 12:throw e.prev=12,e.t0=e.catch(1),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"load";if("save"!==t){var a=w("favorites");return a||[]}O("favorites",e)}function w(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null}function O(e,t){localStorage.setItem(e,JSON.stringify(t))}function g(e,t){if(!t){var a=h.loadFromStorage("weather");t=a?a.weather.cityName:""}return function(){var a=Object(f.a)(m.a.mark((function a(n){var r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.getWeather(e,t);case 3:r=a.sent,n({type:"SET_WEATHER",data:r}),a.next=10;break;case 7:throw a.prev=7,a.t0=a.catch(0),a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}function T(e){return e?(e.isFavorite=!e.isFavorite,function(t){t({type:"REMOVE_FROM_FAVORITES",data:e})}):function(e){e({type:"UPDATE_WEATHER_FAVORITE",data:h.updateWeatherPreferences()})}}function N(e){return function(t){t({type:"SET_FILTER",data:e})}}function y(e){return function(t){t({type:"SET_PREV_PATH",data:e})}}a(64);var j=function(e){var t,a,n=Object(l.c)((function(e){return e.weatherReducer.unit}));if(!e.weather&&n)return null;var c=new Date(e.weather.Date).toUTCString().substring(0,e.weather.Date.length-13);return t="C"===n?e.weather.Temperature.Maximum.Value:1.8*e.weather.Temperature.Maximum.Value+32,a="C"===n?e.weather.Temperature.Maximum.Value:1.8*e.weather.Temperature.Minimum.Value+32,r.a.createElement("div",{className:"forecast-preview-container"},r.a.createElement("div",{className:"forecast flex column"},r.a.createElement("h4",null,c),r.a.createElement("div",{className:"forecast-details flex column space-between"},r.a.createElement("p",null,e.weather.WeatherText),r.a.createElement("p",null,"Max: ",Math.floor(t)," ",n),r.a.createElement("p",null,"Min: ",Math.floor(a)," ",n))))},x=a(34),k=a.n(x),S=(a(65),function(){var e,t=Object(l.b)(),a=Object(l.c)((function(e){return e.weatherReducer.locationSuggestions})),c=document.getElementById("search-options");return Object(n.useEffect)((function(){c&&a&&(c.innerHTML="",a.forEach((function(e){var t=document.createElement("option");t.value=e.name,c.appendChild(t)})))}),[a,c]),r.a.createElement("div",{className:"filter-container flex row align-center"},r.a.createElement("input",{id:"filter-input",name:"filter-input",className:"input-filter",placeholder:"Search for weather",onChange:function(a){var n=a.target.value;e=setTimeout((function(){var e;t((e=n,function(){var t=Object(f.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.getAutocomplete(e);case 3:n=t.sent,a({type:"SET_LOCATION_SUGGESTIONS",payload:n}),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))}),1e3)},list:"search-options"}),r.a.createElement("datalist",{id:"search-options"}),r.a.createElement("button",{className:"btn btn-filter",onClick:function(){var n=document.getElementById("filter-input"),r=a?a.find((function(e){return e.name.toLowerCase()===n.value.toLowerCase()})):null,c=r?"Not a valid search":"Api is not available";""===n.value.trim()||n.value.length<3||!r?k.a.fire({icon:"error",title:"Uh-oh",text:c}):(t(y("/")),t(N(r)),n.value="",clearTimeout(e))}},"Search"))}),R=(a(66),function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.weatherReducer.data})),c=Object(l.c)((function(e){return e.weatherReducer.prevPath})),i=Object(l.c)((function(e){return e.weatherReducer.filter})),o=Object(l.c)((function(e){return e.weatherReducer.unit}));Object(n.useEffect)((function(){"/favorites"!==c&&(e(g(i)),e(y("/")))}),[c,e,i]);var u;return t.weather?r.a.createElement("section",{className:"home-container"},r.a.createElement(S,null),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},t.weather.cityName," - ",t.weather.WeatherText," - ","C"===o?t.weather.Temperature.Metric.Value:t.weather.Temperature.Imperial.Value," ",o),r.a.createElement("div",{className:"card-main"},r.a.createElement("div",{className:"main-description"},r.a.createElement("h3",null," Date: ",new Date(1e3*t.weather.EpochTime).toDateString()),r.a.createElement("img",{src:(u=t.weather.WeatherText.toLowerCase(),u.includes("sunny")||u.includes("clear")?a(67):u.includes("cloud")?a(68):u.includes("rain")||u.includes("showers")?a(69):a(70)),alt:"symbol",className:"weather-card-symbol"}),r.a.createElement("button",{className:"btn",onClick:function(){e(T(null)),e(g(i,t.weather.cityName))}},t.weather.isFavorite?"Remove Favorite":"Make Favorite")))),r.a.createElement("div",{className:"forecast-container flex space-between"},t.forecast.map((function(e,t){return r.a.createElement(j,{key:t,weather:e})})))):null}),F=(a(71),function(){var e=Object(l.b)();return r.a.createElement("div",{className:"app-header"},r.a.createElement("nav",{className:"nav-container flex space-around align-center"},r.a.createElement("li",{className:"nav-item flex align-center"},r.a.createElement(o.b,{className:"header-link",to:"/"},r.a.createElement("button",{className:"btn header-btn"},"Weather"))),r.a.createElement("li",{className:"nav-item flex align-center"},r.a.createElement("button",{className:"btn header-btn",onClick:function(){e((function(e){e({type:"SET_UNIT",data:null})}))}},"C / F")),r.a.createElement("li",{className:"nav-item flex align-center"}," ",r.a.createElement("button",{className:"btn header-btn",onClick:function(){e((function(e){e({type:"SET_THEME",data:null})}))}},"Dark / Light")),r.a.createElement("li",{className:"nav-item flex align-center"},r.a.createElement(o.b,{className:"header-link",to:"/favorites"},r.a.createElement("button",{className:"btn header-btn"},"Favorites")))))}),_=(a(73),function(e){var t=e.city,a=Object(l.c)((function(e){return e.weatherReducer.unit})),n={key:t.key,name:t.cityName},c=Object(l.b)();return t&&r.a.createElement("div",{className:"favorite-preview-container"},r.a.createElement("div",{className:"card fav-card"},r.a.createElement("div",{className:"card-header"},t.cityName," - ",t.WeatherText," - ","C"===a?t.Temperature.Metric.Value:t.Temperature.Imperial.Value," ",a),r.a.createElement("div",{className:"card-main"},r.a.createElement("div",{className:"main-description"},r.a.createElement("h3",null," Date: ",new Date(1e3*t.EpochTime).toDateString()),r.a.createElement("button",{className:"btn fav-btn",onClick:function(){return e.removeFavorite(t)}},"Remove"),r.a.createElement("button",{className:"btn fav-btn",onClick:function(){c(y("/favorites")),c(N(n)),c(g(n))}},r.a.createElement(o.b,{className:"favorite-link",to:"/"},"Weather"))))))}),C=(a(74),function(){var e=Object(l.c)((function(e){return e.weatherReducer.favorites})),t=Object(l.b)(),a=Object(l.c)((function(e){return e.weatherReducer.filter}));Object(n.useEffect)((function(){t((function(e){e({type:"SET_FAVORITES",data:null})})),t(N(a))}),[t,a]);var c=function(e){t(T(e)),t((function(e){e({type:"SET_FAVORITES",data:null})}))};return r.a.createElement("section",{className:"favorites-container flex column"},e[0]?e.map((function(e){return r.a.createElement(_,{key:e.cityName,city:e,removeFavorite:c})})):r.a.createElement("h3",{className:"default-header"},"No Favorites"))});var I=function(){var e=Object(l.c)((function(e){return e.weatherReducer.theme}));return Object(n.useEffect)((function(){var t=document.getElementById("app-bg");"Dark"===e?t.classList.add("dark"):t.classList.remove("dark")}),[e]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"app-bg",className:"bg"}),r.a.createElement(o.a,null,r.a.createElement(F,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:R}),r.a.createElement(u.a,{exact:!0,path:"/favorites",component:C}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(11),V=a(4),M={data:{},favorites:[],locationSuggestions:[],filter:{key:215854,name:"Tel Aviv"},prevPath:"/",unit:"C",theme:"Light"};function L(e,t,a){return e<0?t.unshift(a):t.splice(e,1),h.storageFavorites(t,"save"),{favorites:t}}function W(e,t){return e[0]?e.findIndex((function(e){return e.key===t.key})):-1}function D(e,t,a){if(e>=0){if(t.weather.id===a[e].id){var n=h.updateWeatherPreferences();t.weather=n}a.splice(e,1),h.storageFavorites(a,"save")}return{stateData:t,favorites:a}}var P=Object(A.c)({weatherReducer:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,a=arguments.length>1?arguments[1]:void 0,n=t.favorites,r=t.data,c=t.unit,i=t.theme;switch(a.type){case"SET_WEATHER":return Object(V.a)(Object(V.a)({},t),{},{data:a.data});case"SET_FILTER":return Object(V.a)(Object(V.a)({},t),{},{filter:a.data});case"UPDATE_WEATHER_FAVORITE":var o=L(e=W(n,a.data),n,a.data),u=o.favorites;return Object(V.a)(Object(V.a)({},t),{},{data:a.data,favorites:u});case"SET_FAVORITES":var l=h.storageFavorites();return Object(V.a)(Object(V.a)({},t),{},{favorites:l});case"REMOVE_FROM_FAVORITES":if((e=W(n,a.data))>=0){var s=D(e,r,n,a.data),m=s.stateData,f=s.favorites;return Object(V.a)(Object(V.a)({},t),{},{data:m,favorites:f})}return Object(V.a)(Object(V.a)({},t),{},{favorites:a.data});case"SET_LOCATION_SUGGESTIONS":return Object(V.a)(Object(V.a)({},t),{},{locationSuggestions:a.payload});case"SET_PREV_PATH":return t.prevPath=a.data,Object(V.a)(Object(V.a)({},t),{},{prevPath:a.data});case"SET_UNIT":return c="C"===c?"F":"C",Object(V.a)(Object(V.a)({},t),{},{unit:c});case"SET_THEME":return i="Light"===i?"Dark":"Light",Object(V.a)(Object(V.a)({},t),{},{theme:i});default:return t}}}),H=[a(35).a],U=Object(A.d)(P,A.a.apply(void 0,H));i.a.render(r.a.createElement(l.a,{store:U},r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.4ac3c353.chunk.js.map